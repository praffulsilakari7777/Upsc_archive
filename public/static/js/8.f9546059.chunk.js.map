{"version":3,"sources":["Books/pages/CreateClass.js"],"names":["CreateClass","useContext","AuthContext","useHttpClient","isLoading","error","sendRequest","clearError","useForm","classNo","value","isValid","image","formState","InputHandler","history","useHistory","classSubmitHandler","event","a","preventDefault","formData","FormData","append","inputs","process","push","Fragment","onClear","className","onSubmit","asOverlay","id","element","type","label","validators","VALIDATOR_MINLENGTH","errorText","onInput","center","disabled"],"mappings":"0QA6EeA,UA5DK,WACHC,qBAAWC,KAAxB,IADsB,EAEgCC,cAA9CC,EAFc,EAEdA,UAAWC,EAFG,EAEHA,MAAOC,EAFJ,EAEIA,YAAaC,EAFjB,EAEiBA,WAFjB,EAIYC,YAC9B,CACIC,QAAS,CACLC,MAAO,GACPC,SAAS,GAEbC,MAAO,CACHF,MAAO,KACPC,SAAS,KAGjB,GAfkB,mBAIhBE,EAJgB,KAILC,EAJK,KAkBpBC,EAAUC,cAIVC,EAAkB,uCAAG,WAAMC,GAAN,eAAAC,EAAA,6DACvBD,EAAME,iBADiB,UAGjBC,EAAW,IAAIC,UACZC,OAAO,UAAWV,EAAUW,OAAOf,QAAQC,OACpDW,EAASE,OAAO,QAASV,EAAUW,OAAOZ,MAAMF,OALzB,SAMdJ,EAAY,GAAD,OAAImB,8DAAJ,sBAA2D,OAAQJ,GANhE,OAS3BN,EAAQW,KAAK,WATc,4GAAH,sDAepB,OACI,kBAAC,IAAMC,SAAP,KACA,kBAAC,IAAD,CAAYtB,MAAOA,EAAOuB,QAASrB,IACvC,0BAAMsB,UAAU,aAAcC,SAAUb,GACnCb,GAAa,kBAAC,IAAD,CAAgB2B,WAAS,IACvC,kBAAC,IAAD,CACAC,GAAG,UACHC,QAAQ,QACRC,KAAK,OACLC,MAAM,eACNC,WAAY,CAACC,YAAoB,IACjCC,UAAU,iCACVC,QAASzB,IAGjB,kBAAC,IAAD,CAAa0B,QAAM,EAACR,GAAG,QAAQO,QAASzB,IAEhC,kBAAC,IAAD,CAAQoB,KAAK,SAASO,UAAW5B,EAAUF,SAA3C","file":"static/js/8.f9546059.chunk.js","sourcesContent":["import React, { useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Input from '../../shared/components/FormElements/Input';\r\nimport Button from '../../shared/components/FormElements/Button';\r\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\r\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\r\nimport { VALIDATOR_REQUIRE, VALIDATOR_MINLENGTH } from '../../shared/util/validators';\r\nimport { useForm } from '../../shared/hooks/form-hook';\r\nimport { useHttpClient }  from '../../shared/hooks/http-hook';\r\nimport { AuthContext } from '../../shared/context/auth-context';\r\nimport ImageUpload from '../../shared/components/FormElements/imageUpload';\r\n\r\nimport './PlaceForm.css';\r\n//mport { useParams } from 'react-router-dom';\r\n\r\n\r\n\r\nconst CreateClass = () => {\r\n    const auth = useContext(AuthContext);\r\n    const { isLoading, error, sendRequest, clearError } = useHttpClient();\r\n\r\n   const [formState, InputHandler] =  useForm(\r\n        {\r\n            classNo: {\r\n                value: '',\r\n                isValid: false\r\n            },\r\n            image: {\r\n                value: null,\r\n                isValid: false\r\n            }\r\n        }, \r\n        false\r\n    );\r\n\r\nconst history = useHistory();\r\n  \r\n\r\n\r\nconst classSubmitHandler = async event => {\r\n    event.preventDefault();\r\n  try {\r\n    const formData = new FormData();\r\n    formData.append('classNo', formState.inputs.classNo.value);\r\n    formData.append('image', formState.inputs.image.value);\r\n       await sendRequest(`${process.env.REACT_APP_BACKEND_URL}/books/createClass`, 'POST', formData);\r\n\r\n// Redirect the  user to a different page\r\nhistory.push('/books/');\r\n\r\n} catch (err) {}\r\n   \r\n};\r\n\r\n    return(  \r\n        <React.Fragment>\r\n        <ErrorModal error={error} onClear={clearError} />\r\n    <form className=\"place-form\"  onSubmit={classSubmitHandler}>\r\n        {isLoading && <LoadingSpinner asOverlay />}\r\n        <Input \r\n        id=\"classNo\"\r\n        element=\"input\" \r\n        type=\"text\" \r\n        label=\"Class Number\" \r\n        validators={[VALIDATOR_MINLENGTH(1)]} \r\n        errorText=\"Please enter a valid Class No.\" \r\n        onInput={InputHandler}\r\n        />\r\n\r\n<ImageUpload center id=\"image\" onInput={InputHandler} />\r\n\r\n        <Button type=\"submit\" disabled={!formState.isValid}>ADD CLASS</Button>\r\n    </form>\r\n    </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default CreateClass;"],"sourceRoot":""}